# 简易防火墙软件

本项目实现了一个基于 Python 的简易防火墙程序，通过代理转发的方式对 TCP 与 UDP 数据流进行过滤。该程序能够按照协议、IP、端口、白名单、黑名单以及内容特征来判别数据包是否允许通过，并提供图形界面用于便捷管理规则与查看日志。

## 功能特性

- 支持 TCP/UDP 转发代理，实现对发往本机的流量过滤；
- 规则引擎支持协议、源/目的地址、源/目的端口、内容特征匹配；
- 支持 IP/端口白名单与黑名单；
- 内置默认拒绝策略，可自由切换默认动作；
- 图形界面（Tkinter）用于配置、防火墙启停与实时日志查看；
- 日志可持久化到本地文件，便于事后分析；
- 代码结构清晰，易于扩展自定义规则或集成其他网络模块。

## 运行环境

- Python 3.10+
- 跨平台，仅依赖 Python 标准库（`asyncio`、`tkinter`、`logging` 等）。

> **注意**：如果使用的 Python 发行版未内置 Tkinter，请先安装 Tkinter 对应组件。

## 快速开始

1. 安装依赖（本项目默认使用标准库，无需额外安装，可根据需要添加第三方库并更新 `requirements.txt`）：

   ```bash
   pip install -r requirements.txt
   ```

2. 运行主程序，打开图形界面：

   ```bash
   python main.py
   ```

3. 在界面中：
   - 根据提示设置监听端口与后端服务器信息；
   - 添加或导入过滤规则；
   - 启动防火墙以拦截流量并查看日志。

## 项目结构

```
firewall/
├── firewall/              # 防火墙核心逻辑
│   ├── __init__.py
│   ├── engine.py          # 规则引擎与日志管理
│   ├── gui.py             # Tkinter 图形界面
│   ├── proxy.py           # TCP/UDP 转发与过滤实现
│   └── rules.py           # 规则、白名单与黑名单数据结构
├── docs/
│   └── usage.md           # 详细使用说明
├── main.py                # 程序入口
├── README.md              # 项目说明
└── requirements.txt       # 依赖清单
```

## 文档

详见 `docs/usage.md`，其中包含使用说明、界面说明与常见问题。

## 开发与测试

- 所有模块均带有类型注解与文档字符串，便于阅读与二次开发；
- 使用 `pytest` 或自定义脚本可对规则匹配逻辑进行单元测试（示例测试用例可后续自行编写）。

## 许可协议

本项目遵循 MIT License，详见 `LICENSE` 文件。
